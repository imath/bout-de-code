{"version":3,"sources":["inc/transforms.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","inc/icon.js","inc/edit.js","inc/save.js","index.js"],"names":["transforms","wp","createBlock","blocks","createElement","element","from","type","isMatch","node","nodeName","test","textContent","transform","url","trim","IconBoutDeCode","components","SVG","G","Path","fill","EditBoutDeCodeBlock","blockEditor","RichText","BlockControls","Placeholder","Disabled","SandBox","Button","ExternalLink","Spinner","ToolbarGroup","ToolbarButton","compose","withSelect","data","Fragment","useState","__","i18n","EditBoutDeCode","attributes","setAttributes","isSelected","preview","fetching","caption","label","value","setURL","isEditingURL","setIsEditingURL","editToolbar","event","preventDefault","target","is_bout_de_code","isEmpty","text","select","ownProps","getEmbedPreview","isRequestingEmbedPreview","SaveBoutDeCode","registerBlockType","title","description","icon","category","source","selector","supports","align","edit","save"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: { createBlock },\n\t/* eslint-disable no-unused-vars */\n\telement: { createElement },\n} = wp;\n\n/**\n * Transforms for Bout de Code (Gist) embeds.\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'raw',\n\t\t\tisMatch( node ) {\n\t\t\t\treturn (\n\t\t\t\t\tnode.nodeName === 'P' &&\n\t\t\t\t\t/^\\s*(https?:\\/\\/gist\\.github\\.com\\S+)\\s*$/i.test(\n\t\t\t\t\t\tnode.textContent\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t},\n\t\t\ttransform( node ) {\n\t\t\t\treturn createBlock( 'imath/bout-de-code', {\n\t\t\t\t\turl: node.textContent.trim(),\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","/**\n * WordPress dependencies.\n */\nconst {\n\tcomponents: { SVG, G, Path },\n\t/* eslint-disable no-unused-vars */\n\telement: { createElement },\n} = wp;\n\nconst IconBoutDeCode = () => {\n\treturn (\n\t\t<SVG\n\t\t\tviewBox=\"0 0 100 100\"\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<G>\n\t\t\t\t<Path\n\t\t\t\t\td=\"M 66.915 49.092 L 60.091 55.091 C 59.858 55.296 59.835 55.652 60.04 55.886 L 62.962 59.21 C 63.167 59.444 63.524 59.466 63.757 59.261 L 74.845 49.515 C 75.1 49.291 75.1 48.893 74.845 48.669 L 63.757 38.922 C 63.524 38.717 63.167 38.739 62.962 38.973 L 60.04 42.297 C 59.835 42.531 59.858 42.888 60.091 43.092 Z M 45.637 63.058 C 45.583 63.365 45.788 63.657 46.094 63.71 L 50.454 64.479 C 50.759 64.533 51.052 64.329 51.106 64.022 L 56.201 35.125 C 56.255 34.819 56.051 34.527 55.744 34.473 L 51.385 33.704 C 51.079 33.651 50.786 33.855 50.732 34.161 Z M 26.993 48.669 C 26.738 48.893 26.738 49.291 26.993 49.515 L 38.082 59.261 C 38.314 59.466 38.671 59.444 38.876 59.21 L 41.798 55.886 C 42.003 55.652 41.98 55.296 41.747 55.091 L 34.923 49.092 L 41.747 43.092 C 41.98 42.888 42.003 42.531 41.798 42.297 L 38.876 38.973 C 38.671 38.739 38.314 38.717 38.082 38.922 Z M 96.812 37.803 C 96.862 72.27 50.667 90.752 50.667 90.752 C 50.667 90.752 4.432 72.381 4.389 37.923 C 4.376 22.927 16.516 10.748 31.512 10.732 C 38.602 10.723 45.057 13.437 49.896 17.876 C 50.356 17.861 50.816 17.856 51.275 17.861 C 56.103 13.414 62.547 10.689 69.623 10.684 C 84.623 10.667 96.793 22.806 96.812 37.803 Z\"\n\t\t\t\t\tstyle={ { fill: 'rgb(180, 0, 51)' } }\n\t\t\t\t/>\n\t\t\t</G>\n\t\t</SVG>\n\t);\n};\n\nexport default IconBoutDeCode;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: { RichText, BlockControls },\n\tcomponents: {\n\t\tPlaceholder,\n\t\tDisabled,\n\t\tSandBox,\n\t\tButton,\n\t\tExternalLink,\n\t\tSpinner,\n\t\tToolbarGroup,\n\t\tToolbarButton,\n\t},\n\tcompose: { compose },\n\tdata: { withSelect },\n\telement: {\n\t\t/* eslint-disable no-unused-vars */\n\t\tcreateElement,\n\t\tFragment,\n\t\tuseState,\n\t},\n\ti18n: { __ },\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport IconBoutDeCode from './icon';\n\nconst EditBoutDeCode = ( {\n\tattributes,\n\tsetAttributes,\n\tisSelected,\n\tpreview,\n\tfetching,\n} ) => {\n\tconst { url, caption } = attributes;\n\tconst label = __( 'Bout de Code', 'bout-de-code' );\n\tconst [ value, setURL ] = useState( url );\n\tconst [ isEditingURL, setIsEditingURL ] = useState( ! url );\n\n\tconst onSubmit = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tsetIsEditingURL( false );\n\t\tsetAttributes( { url: value } );\n\t};\n\n\tconst switchBackToURLInput = ( event ) => {\n\t\tif ( event ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tsetIsEditingURL( true );\n\t};\n\n\tconst editToolbar = (\n\t\t<BlockControls>\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t'Modifier l’URL du Bout de Code',\n\t\t\t\t\t\t'bout-de-code'\n\t\t\t\t\t) }\n\t\t\t\t\tonClick={ switchBackToURLInput }\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n\n\tif ( isEditingURL ) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\ticon={ IconBoutDeCode }\n\t\t\t\tlabel={ label }\n\t\t\t\tclassName=\"wp-block-embed\"\n\t\t\t\tinstructions={ __(\n\t\t\t\t\t'Collez l’URL du Gist que vous souhaitez embarquer dans votre publication.',\n\t\t\t\t\t'bout-de-code'\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<form onSubmit={ onSubmit }>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"url\"\n\t\t\t\t\t\tvalue={ value || '' }\n\t\t\t\t\t\tclassName=\"components-placeholder__input\"\n\t\t\t\t\t\taria-label={ label }\n\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t'Saisissez l’URL à embarquer…',\n\t\t\t\t\t\t\t'bout-de-code'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ ( event ) => setURL( event.target.value ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button isPrimary type=\"submit\">\n\t\t\t\t\t\t{ __( 'Embarquer', 'bout-de-code' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t\t<div className=\"components-placeholder__learn-more\">\n\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t'https://wordpress.org/support/article/embeds/'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'En apprendre plus à propos des contenus embarqués',\n\t\t\t\t\t\t\t'bout-de-code'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ExternalLink>\n\t\t\t\t</div>\n\t\t\t</Placeholder>\n\t\t);\n\t}\n\n\tif ( fetching ) {\n\t\treturn (\n\t\t\t<div className=\"wp-block-embed is-loading\">\n\t\t\t\t<Spinner />\n\t\t\t\t<p>{ __( 'Chargement en cours…', 'bout-de-code' ) }</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif ( ! preview || ! preview.url || ! preview.is_bout_de_code ) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ editToolbar }\n\t\t\t\t<Placeholder icon={ IconBoutDeCode } label={ label }>\n\t\t\t\t\t<p className=\"components-placeholder__error\">\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'L’URL que vous avez fournie n’est pas celle d’un bout de code hébergé sur Gist.GitHub.com.',\n\t\t\t\t\t\t\t'bout-de-code'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Placeholder>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{ ! isEditingURL && editToolbar }\n\t\t\t<figure className=\"wp-block-embed is-bout-de-code\">\n\t\t\t\t<div className=\"wp-block-embed__wrapper\">\n\t\t\t\t\t<Disabled>\n\t\t\t\t\t\t<SandBox scripts={ [ preview.url ] } />\n\t\t\t\t\t</Disabled>\n\t\t\t\t</div>\n\t\t\t\t{ ( ! RichText.isEmpty( caption ) || isSelected ) && (\n\t\t\t\t\t<RichText\n\t\t\t\t\t\ttagName=\"figcaption\"\n\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t'Rédigez la légende…',\n\t\t\t\t\t\t\t'bout-de-code'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ caption }\n\t\t\t\t\t\tonChange={ ( text ) =>\n\t\t\t\t\t\t\tsetAttributes( { caption: text } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinlineToolbar\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</figure>\n\t\t</Fragment>\n\t);\n};\n\nconst EditBoutDeCodeBlock = compose( [\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { url } = ownProps.attributes;\n\t\tconst { getEmbedPreview, isRequestingEmbedPreview } = select( 'core' );\n\t\tconst preview = !! url && getEmbedPreview( url );\n\t\tconst fetching = !! url && isRequestingEmbedPreview( url );\n\n\t\treturn { preview, fetching };\n\t} ),\n] )( EditBoutDeCode );\n\nexport default EditBoutDeCodeBlock;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: { RichText },\n\t/* eslint-disable no-unused-vars */\n\telement: { createElement },\n} = wp;\n\nconst SaveBoutDeCode = ( { attributes } ) => {\n\tconst { url, caption } = attributes;\n\n\tif ( ! url ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<figure className=\"wp-block-embed is-bout-de-code\">\n\t\t\t<div className=\"wp-block-embed__wrapper\">\n\t\t\t\t{ `\\n${ url }\\n` /* URL needs to be on its own line. */ }\n\t\t\t</div>\n\t\t\t{ ! RichText.isEmpty( caption ) && (\n\t\t\t\t<RichText.Content tagName=\"figcaption\" value={ caption } />\n\t\t\t) }\n\t\t</figure>\n\t);\n};\n\nexport default SaveBoutDeCode;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: { registerBlockType },\n\t/* eslint-disable no-unused-vars */\n\telement: { createElement },\n\ti18n: { __ },\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport transforms from './inc/transforms';\nimport EditBoutDeCodeBlock from './inc/edit';\nimport SaveBoutDeCode from './inc/save';\nimport IconBoutDeCode from './inc/icon';\n\nregisterBlockType( 'imath/bout-de-code', {\n\ttitle: __( 'Bout de Code', 'bout-de-code' ),\n\tdescription: __(\n\t\t'Embarque des bouts de code hébergés sur Gist.GitHub.com dans votre publication.',\n\t\t'bout-de-code'\n\t),\n\ticon: IconBoutDeCode,\n\tcategory: 'embed',\n\tattributes: {\n\t\turl: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tcaption: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'html',\n\t\t\tselector: 'figcaption',\n\t\t},\n\t},\n\tsupports: {\n\t\talign: true,\n\t},\n\tedit: EditBoutDeCodeBlock,\n\tsave: SaveBoutDeCode,\n\ttransforms,\n} );\n"]}